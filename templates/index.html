<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Activity Planner</title>
    
    <!-- External CSS Files -->
    <link rel="stylesheet" href="/static/results-page-styles.css">
    <link rel="stylesheet" href="/static/main-styles.css">
</head>
<body>
    <div id="main-page">
    <!-- Header Navigation -->
    <header class="app-header">
        <div class="container">
            <nav class="nav-main">
                <div class="nav-brand">Family Activity Planner</div>
                <ul class="nav-menu">
                    <li><a href="#" class="nav-link active" data-view="home">Home</a></li>
                    <li><a href="#" class="nav-link" data-view="search">Search</a></li>
                    <li><a href="#" class="nav-link" data-view="calendar">My Plan</a></li>
                    <li><a href="#" class="nav-link" data-view="my-group" id="myGroupNavLink">My Group</a></li>
                    <li><a href="#" class="nav-link" data-view="add-activity">Add Activity</a></li>
                    <li><a href="#" class="nav-link" data-view="profile">Profile</a></li>
                </ul>
                <div class="nav-user">
                    <a href="#" class="btn btn--outline btn--sm nav-link" data-view="login" id="loginNavBtn">Login</a>
                    <div id="guestInfo" class="hidden" style="display: flex; align-items: center; gap: var(--space-8);">
                        <span class="status status--info" style="position: relative; cursor: pointer;" id="guestBadge">
                            üë§ Guest Mode
                            <div id="guestTooltip" class="hidden" style="position: absolute; top: 100%; right: 0; background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-base); padding: var(--space-8); font-size: var(--font-size-sm); white-space: nowrap; z-index: 1000; box-shadow: var(--shadow-md);">
                                You're using guest mode. Data will not be saved after session ends.
                            </div>
                        </span>
                        <a href="#" class="btn btn--outline btn--sm nav-link" data-view="login">Login/Register</a>
                    </div>
                    <div id="userInfo" class="hidden">
                        <span id="userName">Sarah Johnson</span>
                        <button class="btn btn--outline btn--sm" id="logoutBtn">Logout</button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Home View -->
    <div id="home" class="view active">
        <section class="search-section">
            <div class="container">
                <div class="search-hero">
                    <h1>Discover Amazing Family Activities</h1>
                    <p>Find the perfect activities for your family with our intelligent search and planning tools. From outdoor adventures to creative indoor projects.</p>
                </div>
                <div class="search-bar">
                    <input type="text" class="form-control search-input" placeholder="Search for family activities..." id="mainSearchInput">
                </div>
            </div>
        </section>

        <section class="container">
            <h2 style="margin-bottom: var(--space-24);">Featured Activities</h2>
            <div class="activities-grid" id="featuredActivities"></div>
        </section>
    </div>

    <!-- Search View -->
    <div id="search" class="view">
        <div class="container">
            <!-- My Group Indicator -->
            <div id="myGroupIndicator" class="hidden" style="background: var(--color-secondary); border: 1px solid var(--color-border); border-radius: var(--radius-base); padding: var(--space-12); margin-bottom: var(--space-16); display: flex; align-items: center; justify-content: space-between;">
                <div style="display: flex; align-items: center; gap: var(--space-12);">
                    <span style="font-size: 24px;">üë•</span>
                    <div>
                        <strong>Using My Group Profile</strong>
                        <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-secondary);">
                            <span id="groupMemberCount">0</span> members ‚Ä¢ Ages <span id="groupAgeRange">-</span> ‚Ä¢ Search results personalized for your group
                        </p>
                    </div>
                </div>
                <div style="display: flex; gap: var(--space-8);">
                    <a href="#" class="btn btn--outline btn--sm" onclick="showView('my-group'); return false;">Edit Group</a>
                    <button class="btn btn--outline btn--sm" onclick="toggleMyGroupFilter()">
                        <span id="myGroupToggleText">Disable</span>
                    </button>
                </div>
            </div>

            <div class="main-content">
                <!-- Filters Sidebar -->
                <aside class="filters-sidebar">
                    <div class="filter-group">
                        <h3>Age Range</h3>
                        <label class="form-label">Min Age: <span id="minAgeValue">4</span></label>
                        <input type="range" class="range-slider" id="minAge" min="2" max="18" value="4">
                        <label class="form-label">Max Age: <span id="maxAgeValue">12</span></label>
                        <input type="range" class="range-slider" id="maxAge" min="2" max="18" value="12">
                    </div>

                    <div class="filter-group">
                        <h3>Duration</h3>
                        <select class="form-control" id="durationFilter">
                            <option value="">Any Duration</option>
                            <option value="15">15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                            <option value="120">2+ hours</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <h3>Cost</h3>
                        <select class="form-control" id="costFilter">
                            <option value="">Any Cost</option>
                            <option value="Free">Free</option>
                            <option value="$1-10">Low cost ($1-10)</option>
                            <option value="$11-25">Medium cost ($11-25)</option>
                            <option value="$25+">High cost ($25+)</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <h3>Location</h3>
                        <div class="filter-toggle">
                            <button class="toggle-btn active" data-filter="indoor_outdoor" data-value="">All</button>
                            <button class="toggle-btn" data-filter="indoor_outdoor" data-value="Indoor">Indoor</button>
                            <button class="toggle-btn" data-filter="indoor_outdoor" data-value="Outdoor">Outdoor</button>
                        </div>
                    </div>

                    <div class="filter-group">
                        <h3>Season</h3>
                        <select class="form-control" id="seasonFilter">
                            <option value="">All Seasons</option>
                            <option value="Spring">Spring</option>
                            <option value="Summer">Summer</option>
                            <option value="Fall">Fall</option>
                            <option value="Winter">Winter</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <h3>Number of Players</h3>
                        <input type="number" class="form-control" id="playersFilter" placeholder="Any number" min="1">
                    </div>
                </aside>

                <!-- Search Results -->
                <main>
                    <div style="margin-bottom: var(--space-24);">
                        <input type="text" class="form-control" placeholder="Search activities..." id="searchInput">
                    </div>
                    <div id="searchResults">
                        <div class="activities-grid" id="activitiesGrid"></div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <!-- Add Activity View -->
    <div id="add-activity" class="view">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto;">
                <h1>Add New Activity</h1>
                <p class="mb-8">Share your favorite family activity with our community!</p>
                
                <form id="addActivityForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Activity Title *</label>
                            <input type="text" class="form-control" name="title" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Duration (minutes) *</label>
                            <input type="number" class="form-control" name="duration" min="1" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Min Age *</label>
                            <input type="number" class="form-control" name="age_min" min="1" max="18" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Max Age *</label>
                            <input type="number" class="form-control" name="age_max" min="1" max="18" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Cost Range *</label>
                            <select class="form-control" name="cost" required>
                                <option value="">Select cost range</option>
                                <option value="Free">Free</option>
                                <option value="$1-10">$1-10</option>
                                <option value="$11-25">$11-25</option>
                                <option value="$25+">$25+</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Location *</label>
                            <select class="form-control" name="indoor_outdoor" required>
                                <option value="">Select location</option>
                                <option value="Indoor">Indoor</option>
                                <option value="Outdoor">Outdoor</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Number of Players</label>
                            <input type="text" class="form-control" name="players" placeholder="e.g., 2-6">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Seasons (hold Ctrl/Cmd for multiple)</label>
                            <select class="form-control" name="season" multiple>
                                <option value="Spring">Spring</option>
                                <option value="Summer">Summer</option>
                                <option value="Fall">Fall</option>
                                <option value="Winter">Winter</option>
                            </select>
                        </div>
                        
                        <div class="form-group form-group-full">
                            <label class="form-label">Tags (comma-separated)</label>
                            <input type="text" class="form-control" name="tags" placeholder="outdoor, nature, exploration, learning">
                        </div>
                        
                        <div class="form-group form-group-full">
                            <label class="form-label">Materials Needed *</label>
                            <textarea class="form-control" name="materials" rows="3" placeholder="List all materials needed for this activity..." required></textarea>
                        </div>
                        
                        <div class="form-group form-group-full">
                            <label class="form-label">How to Play / Instructions *</label>
                            <textarea class="form-control" name="instructions" rows="6" placeholder="Provide step-by-step instructions..." required></textarea>
                        </div>
                        
                        <div class="form-group form-group-full">
                            <label class="form-label">Parent Caution Notes</label>
                            <textarea class="form-control" name="caution" rows="2" placeholder="Any safety notes or cautions for parents..."></textarea>
                        </div>
                    </div>
                    
                    <div class="flex gap-16" style="margin-top: var(--space-24);">
                        <button type="button" class="btn btn--secondary" id="saveDraftBtn">Save Draft</button>
                        <button type="submit" class="btn btn--primary">Submit Activity</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Calendar View -->
    <div id="calendar" class="view">
        <div class="container">
            <div class="flex justify-between items-center" style="margin-bottom: var(--space-24);">
                <h1>My Activity Plan</h1>
                <div class="flex gap-8">
                    <button class="btn btn--outline btn--sm" id="exportPdfBtn" onclick="exportToPDF()">Export PDF</button>
                    <button class="btn btn--outline btn--sm" id="exportCsvBtn" onclick="exportToCSV()">Export CSV</button>
                    <button class="btn btn--outline btn--sm" id="exportIcsBtn" onclick="exportToICS()">Export ICS</button>
                </div>
            </div>
            
            <div class="calendar-grid">
                <div class="calendar-header">Sunday</div>
                <div class="calendar-header">Monday</div>
                <div class="calendar-header">Tuesday</div>
                <div class="calendar-header">Wednesday</div>
                <div class="calendar-header">Thursday</div>
                <div class="calendar-header">Friday</div>
                <div class="calendar-header">Saturday</div>
                
                <!-- Sample calendar days -->
                <div class="calendar-day">
                    <div class="day-number">15</div>
                    <div class="day-activities">
                        <div class="calendar-activity">Nature Hunt (2 PM)</div>
                    </div>
                </div>
                <div class="calendar-day">
                    <div class="day-number">16</div>
                </div>
                <div class="calendar-day">
                    <div class="day-number">17</div>
                    <div class="day-activities">
                        <div class="calendar-activity">Art Gallery (10 AM)</div>
                        <div class="calendar-activity">Kitchen Science (3 PM)</div>
                    </div>
                </div>
                <div class="calendar-day">
                    <div class="day-number">18</div>
                </div>
                <div class="calendar-day">
                    <div class="day-number">19</div>
                    <div class="day-activities">
                        <div class="calendar-activity">Obstacle Course (11 AM)</div>
                    </div>
                </div>
                <div class="calendar-day">
                    <div class="day-number">20</div>
                </div>
                <div class="calendar-day">
                    <div class="day-number">21</div>
                    <div class="day-activities">
                        <div class="calendar-activity">Backyard Camping (6 PM)</div>
                    </div>
                </div>
                
                <!-- Add more days as needed -->
                <div class="calendar-day"><div class="day-number">22</div></div>
                <div class="calendar-day"><div class="day-number">23</div></div>
                <div class="calendar-day"><div class="day-number">24</div></div>
                <div class="calendar-day"><div class="day-number">25</div></div>
                <div class="calendar-day"><div class="day-number">26</div></div>
                <div class="calendar-day"><div class="day-number">27</div></div>
                <div class="calendar-day"><div class="day-number">28</div></div>
            </div>
        </div>
    </div>

    <!-- Member Form View -->
    <div id="member-form" class="view">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto;">
                <!-- Breadcrumb -->
                <div style="margin-bottom: var(--space-24); font-size: var(--font-size-sm); color: var(--color-text-secondary);">
                    <a href="#" onclick="showView('my-group')" style="color: var(--color-primary);">My Group</a> > 
                    <span id="memberFormBreadcrumb">Add Member</span>
                </div>
                
                <h1 id="memberFormTitle">Add New Member</h1>
                
                <form id="memberPageForm" style="margin-top: var(--space-32);">
                    <!-- All the member form content from the modal -->
                    <!-- Basic Information -->
                    <div style="margin-bottom: var(--space-24);">
                        <h4 style="margin-bottom: var(--space-16); color: var(--color-primary);">Basic Information</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Full Name *</label>
                                <input type="text" class="form-control" name="name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Nickname</label>
                                <input type="text" class="form-control" name="nickname">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Date of Birth *</label>
                                <input type="date" class="form-control" name="date_of_birth" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Gender</label>
                                <select class="form-control" name="gender">
                                    <option value="">Prefer not to say</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Physical Characteristics -->
                    <div style="margin-bottom: var(--space-24);">
                        <h4 style="margin-bottom: var(--space-16); color: var(--color-primary);">Physical Characteristics</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Height (cm) *</label>
                                <input type="number" class="form-control" name="height_cm" min="50" max="250" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Weight (kg) *</label>
                                <input type="number" class="form-control" name="weight_kg" min="5" max="200" step="0.1" required>
                            </div>
                            <div class="form-group form-group-full">
                                <label class="form-label">BMI (calculated automatically)</label>
                                <input type="text" class="form-control" name="bmi" readonly style="background: var(--color-secondary);">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Abilities & Skills -->
                    <div style="margin-bottom: var(--space-24);">
                        <h4 style="margin-bottom: var(--space-16); color: var(--color-primary);">Abilities &amp; Skills</h4>
                        <div class="form-group">
                            <label class="form-label">Overall Physical Ability Level (1-10) *</label>
                            <input type="range" class="range-slider" name="overall_ability" min="1" max="10" value="5" required>
                            <div style="display: flex; justify-content: space-between; font-size: var(--font-size-xs); color: var(--color-text-secondary);">
                                <span>Beginner</span>
                                <span>Intermediate</span>
                                <span>Expert</span>
                            </div>
                        </div>
                        
                        <h5 style="margin: var(--space-16) 0 var(--space-8) 0;">Motor Skills</h5>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Fine Motor Skills (1-10)</label>
                                <input type="range" class="range-slider" name="fine_motor" min="1" max="10" value="5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Gross Motor Skills (1-10)</label>
                                <input type="range" class="range-slider" name="gross_motor" min="1" max="10" value="5">
                            </div>
                        </div>
                        
                        <h5 style="margin: var(--space-16) 0 var(--space-8) 0;">Physical Capabilities</h5>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Endurance Level (1-10)</label>
                                <input type="range" class="range-slider" name="endurance" min="1" max="10" value="5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Strength Level (1-10)</label>
                                <input type="range" class="range-slider" name="strength" min="1" max="10" value="5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Flexibility Level (1-10)</label>
                                <input type="range" class="range-slider" name="flexibility" min="1" max="10" value="5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Balance &amp; Coordination (1-10)</label>
                                <input type="range" class="range-slider" name="balance" min="1" max="10" value="5">
                            </div>
                        </div>
                        
                        <h5 style="margin: var(--space-16) 0 var(--space-8) 0;">Cognitive Abilities</h5>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Reading Level</label>
                                <select class="form-control" name="reading_level">
                                    <option value="Pre-reader">Pre-reader</option>
                                    <option value="Beginning">Beginning</option>
                                    <option value="Intermediate">Intermediate</option>
                                    <option value="Advanced">Advanced</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Math Skills</label>
                                <select class="form-control" name="math_skills">
                                    <option value="Basic counting">Basic counting</option>
                                    <option value="Simple arithmetic">Simple arithmetic</option>
                                    <option value="Advanced math">Advanced math</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Problem-solving Skills (1-10)</label>
                                <input type="range" class="range-slider" name="problem_solving" min="1" max="10" value="5">
                            </div>
                        </div>
                        
                        <h5 style="margin: var(--space-16) 0 var(--space-8) 0;">Social Skills</h5>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Group Interaction Comfort (1-10)</label>
                                <input type="range" class="range-slider" name="group_interaction" min="1" max="10" value="5">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Leadership Tendency (1-10)</label>
                                <input type="range" class="range-slider" name="leadership" min="1" max="10" value="5">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Special Considerations -->
                    <div style="margin-bottom: var(--space-24);">
                        <h4 style="margin-bottom: var(--space-16); color: var(--color-primary);">Special Considerations</h4>
                        <div class="form-group">
                            <label class="form-label">Disabilities/Special Needs</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-8); margin-bottom: var(--space-8);">
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="special_needs" value="Mobility limitations"> Mobility limitations
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="special_needs" value="Visual impairment"> Visual impairment
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="special_needs" value="Hearing impairment"> Hearing impairment
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="special_needs" value="Autism spectrum"> Autism spectrum
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="special_needs" value="ADHD"> ADHD
                                </label>
                            </div>
                            <input type="text" class="form-control" name="other_special_needs" placeholder="Other (please specify)">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Allergies</label>
                            <textarea class="form-control" name="allergies" rows="2" placeholder="List any allergies..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Medical Conditions</label>
                            <textarea class="form-control" name="medical_conditions" rows="2" placeholder="Any relevant medical conditions..."></textarea>
                        </div>
                    </div>
                    
                    <!-- Interests & Preferences -->
                    <div style="margin-bottom: var(--space-24);">
                        <h4 style="margin-bottom: var(--space-16); color: var(--color-primary);">Interests &amp; Preferences</h4>
                        <div class="form-group">
                            <label class="form-label">Favorite Activity Types (select multiple)</label>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-8);">
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Sports & Physical Activities"> Sports &amp; Physical Activities
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Arts & Crafts"> Arts &amp; Crafts
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Science & Exploration"> Science &amp; Exploration
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Music & Performance"> Music &amp; Performance
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Reading & Storytelling"> Reading &amp; Storytelling
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Building & Construction"> Building &amp; Construction
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Nature & Outdoors"> Nature &amp; Outdoors
                                </label>
                                <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                    <input type="checkbox" name="interests" value="Technology & Gaming"> Technology &amp; Gaming
                                </label>
                            </div>
                        </div>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Activity Preference</label>
                                <select class="form-control" name="activity_preference">
                                    <option value="Both">Both Indoor &amp; Outdoor</option>
                                    <option value="Indoor">Prefer Indoor</option>
                                    <option value="Outdoor">Prefer Outdoor</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Energy Level</label>
                                <select class="form-control" name="energy_level">
                                    <option value="Low">Low</option>
                                    <option value="Moderate">Moderate</option>
                                    <option value="High">High</option>
                                    <option value="Very High">Very High</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex gap-16" style="margin-top: var(--space-32); padding-top: var(--space-16); border-top: 1px solid var(--color-border);">
                        <button type="button" class="btn btn--secondary" onclick="showView('my-group')">Cancel</button>
                        <button type="submit" class="btn btn--primary">Save Member</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Activity Details View -->
    <div id="activity-details" class="view">
        <div class="container">
            <div style="max-width: 800px; margin: 0 auto;">
                <!-- Breadcrumb -->
                <div style="margin-bottom: var(--space-24); font-size: var(--font-size-sm); color: var(--color-text-secondary);">
                    <a href="#" onclick="showView('search')" style="color: var(--color-primary);">Search</a> > 
                    <span id="activityDetailsBreadcrumb">Activity Details</span>
                </div>
                
                <div style="display: flex; align-items: center; gap: var(--space-16); margin-bottom: var(--space-24);">
                    <button class="btn btn--outline btn--sm" onclick="showView('search')">‚Üê Back</button>
                    <h1 id="activityDetailsTitle">Activity Details</h1>
                </div>
                
                <div id="activityDetailsContent">
                    <!-- Content populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- My Group View -->
    <div id="my-group" class="view">
        <div class="container">
            <div class="flex justify-between items-center" style="margin-bottom: var(--space-32);">
                <div>
                    <h1>My Family Group</h1>
                    <p style="color: var(--color-text-secondary); margin: 0;">Add group members to get personalized activity recommendations</p>
                </div>
                <button class="btn btn--primary" onclick="showView('member-form')">
                    + Add New Member
                </button>
            </div>
            
            <!-- Quick Add Member Templates -->
            <div style="margin-bottom: var(--space-32);">
                <h2 style="margin-bottom: var(--space-16);">Quick Add Member Templates</h2>
                <p style="color: var(--color-text-secondary); margin-bottom: var(--space-24);">Choose from pre-configured member types to quickly add to your group. You can edit the details after adding.</p>
                
                <div class="activities-grid" id="memberTemplatesGrid" style="grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));">
                    <!-- Template: Toddler -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üë∂</div>
                        <h4 style="margin-bottom: var(--space-8);">Toddler</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">2-3 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Low abilities, basic motor skills, pre-reader</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_toddler')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Preschooler -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üßí</div>
                        <h4 style="margin-bottom: var(--space-8);">Preschooler</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">4-5 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Developing abilities, improving motor skills, learning basics</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_preschooler')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Early Elementary -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üëß</div>
                        <h4 style="margin-bottom: var(--space-8);">Early Elementary</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">6-8 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Intermediate abilities, good coordination, beginning reader</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_early_elem')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Late Elementary -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üßë</div>
                        <h4 style="margin-bottom: var(--space-8);">Late Elementary</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">9-11 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Advanced abilities, strong skills, proficient reader</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_late_elem')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Preteen -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üë¶</div>
                        <h4 style="margin-bottom: var(--space-8);">Preteen</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">12-14 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Expert level, excellent physical abilities, advanced learner</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_preteen')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Teen -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üßë‚Äçüéì</div>
                        <h4 style="margin-bottom: var(--space-8);">Teen</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">15-17 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Peak physical abilities, mature cognitive skills, independent</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_teen')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Adult Supervisor -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üë®‚Äçüë©</div>
                        <h4 style="margin-bottom: var(--space-8);">Adult Supervisor</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">25-45 years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Supervising role, full abilities</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_adult')">Quick Add</button>
                    </div>
                    
                    <!-- Template: Senior -->
                    <div class="card" style="padding: var(--space-16); text-align: center;">
                        <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-12);">üë¥</div>
                        <h4 style="margin-bottom: var(--space-8);">Senior</h4>
                        <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm); margin-bottom: var(--space-8);">65+ years</p>
                        <p style="font-size: var(--font-size-xs); color: var(--color-text-secondary); margin-bottom: var(--space-16);">Moderate abilities, some limitations, experienced</p>
                        <button class="btn btn--primary btn--sm" onclick="addMemberTemplate('template_senior')">Quick Add</button>
                    </div>
                </div>
            </div>
            
            <!-- Group Summary -->
            <div class="card" style="margin-bottom: var(--space-32);">
                <div class="card__body">
                    <h3 style="margin-bottom: var(--space-16);">Group Summary</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalMembers">0</div>
                            <div class="stat-label">Total Members</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="ageRange">-</div>
                            <div class="stat-label">Age Range</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="avgAbility">-</div>
                            <div class="stat-label">Avg Ability Level</div>
                        </div>
                        <div class="stat-card">
                            <button class="btn btn--primary btn--sm" id="getRecommendationsBtn" disabled>Get Recommendations</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ML Features Explanation -->
            <div class="card" style="margin-bottom: var(--space-32); background: var(--color-bg-1);">
                <div class="card__body">
                    <h3 style="margin-bottom: var(--space-16);">How We Use Your Group Data</h3>
                    <p style="margin-bottom: var(--space-16); color: var(--color-text-secondary);">Our hybrid search system combines keyword matching (BM25), semantic understanding (Sentence-BERT), and neural re-ranking to provide personalized recommendations.</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-16);">
                        <div style="display: flex; align-items: center; gap: var(--space-8);">
                            <span style="font-size: var(--font-size-2xl);">üë∂</span>
                            <div>
                                <div style="font-weight: var(--font-weight-semibold);">Age Matching</div>
                                <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">Filters activities within appropriate age ranges</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-8);">
                            <span style="font-size: var(--font-size-2xl);">üí™</span>
                            <div>
                                <div style="font-weight: var(--font-weight-semibold);">Ability Scoring</div>
                                <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">Ranks activities by difficulty match</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-8);">
                            <span style="font-size: var(--font-size-2xl);">‚öïÔ∏è</span>
                            <div>
                                <div style="font-weight: var(--font-weight-semibold);">Safety First</div>
                                <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">Excludes activities conflicting with allergies or special needs</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-8);">
                            <span style="font-size: var(--font-size-2xl);">üéØ</span>
                            <div>
                                <div style="font-weight: var(--font-weight-semibold);">Interest Alignment</div>
                                <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">Boosts activities matching group preferences</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: var(--space-8);">
                            <span style="font-size: var(--font-size-2xl);">üë•</span>
                            <div>
                                <div style="font-weight: var(--font-weight-semibold);">Group Optimization</div>
                                <div style="font-size: var(--font-size-sm); color: var(--color-text-secondary);">Finds activities suitable for all members</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Group Members Grid -->
            <div id="groupMembersSection">
                <h3 style="margin-bottom: var(--space-16);">Family Members</h3>
                <div id="emptyState" class="card" style="text-align: center; padding: var(--space-32);">
                    <div style="font-size: var(--font-size-4xl); margin-bottom: var(--space-16);">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <h4 style="margin-bottom: var(--space-8);">No group members yet</h4>
                    <p style="color: var(--color-text-secondary); margin-bottom: var(--space-16);">Add your first member to start getting personalized recommendations!</p>
                    <button class="btn btn--primary" onclick="document.getElementById('addMemberBtn').click()">Add First Member</button>
                </div>
                <div class="activities-grid" id="membersGrid" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Profile View -->
    <div id="profile" class="view">
        <div class="container">
            <h1>My Profile</h1>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Activities Contributed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Activities Planned</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">245</div>
                    <div class="stat-label">Community Points</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">March 2024</div>
                    <div class="stat-label">Member Since</div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-32);">
                <div class="card">
                    <div class="card__body">
                        <h3>Recent Submissions</h3>
                        <ul style="list-style: none; padding: 0; margin: var(--space-16) 0 0 0;">
                            <li style="padding: var(--space-8) 0; border-bottom: 1px solid var(--color-border);">Garden Treasure Map <span class="status status--success">Approved</span></li>
                            <li style="padding: var(--space-8) 0; border-bottom: 1px solid var(--color-border);">Rainy Day Dance Party <span class="status status--warning">Under Review</span></li>
                            <li style="padding: var(--space-8) 0;">Build a Fort Challenge <span class="status status--info">Draft</span></li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card__body">
                        <h3>Account Settings</h3>
                        <div class="form-group">
                            <label class="form-label">Name</label>
                            <input type="text" class="form-control" value="Sarah Johnson">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" value="sarah.johnson@email.com">
                        </div>
                        <button class="btn btn--primary">Update Profile</button>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!-- Login/Register Page -->
    <div id="login" class="view">
        <div class="container">
            <div style="max-width: 400px; margin: 0 auto; padding-top: var(--space-32);">
                <!-- App Logo -->
                <div style="text-align: center; margin-bottom: var(--space-32);">
                    <div class="nav-brand" style="font-size: var(--font-size-3xl); margin-bottom: var(--space-8);">Family Activity Planner</div>
                    <p style="color: var(--color-text-secondary);">Welcome back! Please sign in to your account.</p>
                </div>
                
                <!-- Login/Register Tabs -->
                <div class="auth-tabs" style="display: flex; margin-bottom: var(--space-24); border-bottom: 1px solid var(--color-border);">
                    <button class="auth-tab active" data-tab="login" style="flex: 1; padding: var(--space-12); border: none; background: none; font-weight: var(--font-weight-medium); cursor: pointer; border-bottom: 2px solid var(--color-primary); color: var(--color-primary);">Login</button>
                    <button class="auth-tab" data-tab="register" style="flex: 1; padding: var(--space-12); border: none; background: none; font-weight: var(--font-weight-medium); cursor: pointer; border-bottom: 2px solid transparent; color: var(--color-text-secondary);">Register</button>
                </div>
                
                <!-- Login Form -->
                <div id="loginTabContent" class="auth-content">
                    <form id="loginForm">
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                <input type="checkbox" id="rememberMe"> Remember me
                            </label>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width" style="margin-bottom: var(--space-16);">Login</button>
                        <div style="text-align: center; margin-bottom: var(--space-16);">
                            <a href="#" style="font-size: var(--font-size-sm); color: var(--color-primary);">Forgot password?</a>
                        </div>
                        
                        <!-- Divider -->
                        <div style="text-align: center; margin: var(--space-24) 0; position: relative;">
                            <span style="background: var(--color-background); padding: 0 var(--space-16); color: var(--color-text-secondary); font-size: var(--font-size-sm);">OR</span>
                            <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: var(--color-border); z-index: -1;"></div>
                        </div>
                        
                        <!-- Social Login -->
                        <div style="display: flex; flex-direction: column; gap: var(--space-8);">
                            <button type="button" class="btn btn--outline btn--full-width" style="display: flex; align-items: center; justify-content: center; gap: var(--space-8);">Continue with Google</button>
                            <button type="button" class="btn btn--outline btn--full-width" style="display: flex; align-items: center; justify-content: center; gap: var(--space-8);">Continue with Facebook</button>
                        </div>
                    </form>
                </div>
                
                <!-- Register Form -->
                <div id="registerTabContent" class="auth-content hidden">
                    <form id="registerForm">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control" id="registerName" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="registerEmail" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="registerPassword" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: var(--space-8); font-size: var(--font-size-sm);">
                                <input type="checkbox" id="agreeTerms" required> I agree to <a href="#" style="color: var(--color-primary);">Terms &amp; Conditions</a>
                            </label>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width" style="margin-bottom: var(--space-16);">Create Account</button>
                        
                        <!-- Divider -->
                        <div style="text-align: center; margin: var(--space-24) 0; position: relative;">
                            <span style="background: var(--color-background); padding: 0 var(--space-16); color: var(--color-text-secondary); font-size: var(--font-size-sm);">OR</span>
                            <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: var(--color-border); z-index: -1;"></div>
                        </div>
                        
                        <!-- Social Signup -->
                        <div style="display: flex; flex-direction: column; gap: var(--space-8);">
                            <button type="button" class="btn btn--outline btn--full-width" style="display: flex; align-items: center; justify-content: center; gap: var(--space-8);">Sign up with Google</button>
                            <button type="button" class="btn btn--outline btn--full-width" style="display: flex; align-items: center; justify-content: center; gap: var(--space-8);">Sign up with Facebook</button>
                        </div>
                    </form>
                </div>
                
                <!-- Guest Mode Section -->
                <div style="text-align: center; margin: var(--space-32) 0; position: relative;">
                    <span style="background: var(--color-background); padding: 0 var(--space-16); color: var(--color-text-secondary); font-size: var(--font-size-sm);">OR</span>
                    <div style="position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: var(--color-border); z-index: -1;"></div>
                </div>
                
                <!-- Continue as Guest Button -->
                <button type="button" class="btn btn--outline btn--full-width" id="continueAsGuestBtn" style="display: flex; align-items: center; justify-content: center; gap: var(--space-8); margin-bottom: var(--space-16);">
                    <span style="font-size: var(--font-size-lg);">üë§</span>
                    Continue as Guest - No account needed
                </button>
                
                <!-- Switch Link -->
                <div style="text-align: center; margin-top: var(--space-24); padding-top: var(--space-24); border-top: 1px solid var(--color-border);">
                    <p id="switchText" style="font-size: var(--font-size-sm); color: var(--color-text-secondary); margin: 0;">
                        Don't have an account? <a href="#" id="switchAuthMode" style="color: var(--color-primary); font-weight: var(--font-weight-medium);">Register</a>
                    </p>
                </div>
            </div>
        </div>
    </div>


    <!-- External JavaScript Files -->
    <script src="/static/main-script.js"></script>
    <script src="/static/api-integration.js"></script>
    
    <!-- Activity Detail Modal -->
    <div class="activity-modal" id="activityModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeActivityModal()">√ó</button>
            <div id="modalBody">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading activity details...</p>
                </div>
            </div>
        </div>
    </div>
    </div>
</body>
</html>
